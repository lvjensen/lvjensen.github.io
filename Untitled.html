<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Logan Jensen" />

<meta name="date" content="2019-01-17" />

<title>Untitled</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Logan's Super Lit Data</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="AnalysisProjects.html">Statistical Analyses</a>
</li>
<li>
  <a href="dwvanalyses.html">Data Wrangling/Visualization Analyses</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Untitled</h1>
<h4 class="author"><em>Logan Jensen</em></h4>
<h4 class="date"><em>January 17, 2019</em></h4>

</div>


<div id="section" class="section level1">
<h1></h1>
</div>
<div id="this-is-a-shiny-web-application.-you-can-run-the-application-by-clicking" class="section level1">
<h1>This is a Shiny web application. You can run the application by clicking</h1>
</div>
<div id="the-run-app-button-above." class="section level1">
<h1>the ‘Run App’ button above.</h1>
</div>
<div id="section-1" class="section level1">
<h1></h1>
</div>
<div id="find-out-more-about-building-applications-with-shiny-here" class="section level1">
<h1>Find out more about building applications with Shiny here:</h1>
</div>
<div id="section-2" class="section level1">
<h1></h1>
</div>
<div id="httpshiny.rstudio.com" class="section level1">
<h1><a href="http://shiny.rstudio.com/" class="uri">http://shiny.rstudio.com/</a></h1>
</div>
<div id="section-3" class="section level1">
<h1></h1>
<div id="the-purpose-of-this-section-is-to-get-clean-data." class="section level3">
<h3>The purpose of this section is to get clean data.</h3>
</div>
<div id="dates-from-10-years-ago." class="section level2">
<h2>Dates from 10 years ago.</h2>
</div>
<div id="breaking-the-data-up-by-year-finding-the-correlation-between-each-year-adding-a-year-column-and-joining-the-data-back-together" class="section level2">
<h2>Breaking the data up by year, finding the correlation between each year, adding a year column, and joining the data back together</h2>
<p>library(shiny) library(tidyverse) library(BatchGetSymbols) library(reshape2) # Used to melt the data</p>
</div>
<div id="this-section-gets-the-data" class="section level2">
<h2>This section gets the data</h2>
<p>first.date &lt;- Sys.Date() - 3668 last.date &lt;- Sys.Date() freq.data &lt;- ‘monthly’</p>
<p>tickers &lt;- c(‘GILD’,‘UNP’,‘MCD’,‘HPQ’, ‘MMM’, ‘CSCO’, ‘SLB’, ‘AMGN’, ‘BA’, ‘COP’, ‘CMCSA’, ‘BMY’, ‘VZ’, ‘T’, ‘PEP’, ‘MCD’, ‘PFE’, ‘ABT’, ‘ORCL’, ‘DIS’)</p>
<p>l.out &lt;- BatchGetSymbols(tickers = tickers, first.date = first.date, last.date = last.date, freq.data = freq.data, cache.folder = file.path(tempdir(), ‘BGS_Cache’) ) # cache in tempdir()</p>
</div>
<div id="this-section-breaks-the-data-up-into-subsets-by-year-finds-the-correlation-and-creates-a-year-column." class="section level2">
<h2>This section breaks the data up into subsets by year, finds the correlation, and creates a year column.</h2>
<p>dat_2009 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2009’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
</div>
<div id="computing-the-correlation-matrix" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2009),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_09 &lt;- melted_cormat %&gt;% cbind(year = “2009”)</p>
<p>dat_2010 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2010’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-1" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2010),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-1" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_10 &lt;- melted_cormat %&gt;% cbind(year = “2010”)</p>
<p>dat_2011 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2011’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-2" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2011),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-2" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_11 &lt;- melted_cormat %&gt;% cbind(year = “2011”)</p>
<p>dat_2012 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2012’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-3" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2012),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-3" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_12 &lt;- melted_cormat %&gt;% cbind(year = “2012”)</p>
<p>dat_2013 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2013’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-4" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2013),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-4" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_13 &lt;- melted_cormat %&gt;% cbind(year = “2013”)</p>
<p>dat_2014 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2014’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-5" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2014),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-5" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_14 &lt;- melted_cormat %&gt;% cbind(year = “2014”)</p>
<p>dat_2015 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2015’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-6" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2015),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-6" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_15 &lt;- melted_cormat %&gt;% cbind(year = “2015”)</p>
<p>dat_2016 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2016’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-7" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2016),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-7" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_16 &lt;- melted_cormat %&gt;% cbind(year = “2016”)</p>
<p>dat_2017 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2017’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-8" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2017),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-8" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_17 &lt;- melted_cormat %&gt;% cbind(year = “2017”)</p>
<p>dat_2018 &lt;- as.data.frame(l.out$df.tickers) %&gt;% filter(str_detect(ref.date, ‘2018’)) %&gt;% select(ticker, ref.date, price.adjusted) %&gt;% spread(key = ticker, price.adjusted, fill = NA) %&gt;% select(-ref.date)</p>
</div>
<div id="computing-the-correlation-matrix-9" class="section level1">
<h1>Computing the correlation matrix</h1>
<p>cormat &lt;- round(cor(dat_2018),2) # “melting” the data for the heat map melted_cormat &lt;- melt(cormat) # Get lower triangle of the correlation matrix get_lower_tri&lt;-function(cormat){ cormat[upper.tri(cormat)] &lt;- NA return(cormat) } # Get upper triangle of the correlation matrix get_upper_tri &lt;- function(cormat){ cormat[lower.tri(cormat)]&lt;- NA return(cormat) } upper_tri &lt;- get_upper_tri(cormat) #upper_tri # Melt the correlation matrix melted_cormat &lt;- melt(upper_tri, na.rm = TRUE)</p>
</div>
<div id="adding-a-column-with-the-year-9" class="section level1">
<h1>Adding a column with the year</h1>
<p>dat_18 &lt;- melted_cormat %&gt;% cbind(year = “2018”)</p>
<div id="this-section-combines-all-the-subsets-back-together-into-one-dataset." class="section level2">
<h2>This section combines all the subsets back together into one dataset.</h2>
<p>lit_dat &lt;- bind_rows(dat_18, dat_17, dat_16, dat_15, dat_14, dat_13, dat_12, dat_11, dat_10, dat_09) lit_dat<span class="math inline">\(ticker_1 &lt;- lit_dat\)</span>Var1 lit_dat<span class="math inline">\(Var1 &lt;- NULL lit_dat\)</span>ticker_2 &lt;- lit_dat<span class="math inline">\(Var2 lit_dat\)</span>Var2 &lt;- NULL</p>
</div>
</div>
<div id="section-4" class="section level1">
<h1></h1>
</div>
<div id="section-5" class="section level1">
<h1></h1>
</div>
<div id="section-6" class="section level1">
<h1></h1>
</div>
<div id="section-7" class="section level1">
<h1></h1>
</div>
<div id="section-8" class="section level1">
<h1></h1>
</div>
<div id="this-is-a-shiny-web-application.-you-can-run-the-application-by-clicking-1" class="section level1">
<h1>This is a Shiny web application. You can run the application by clicking</h1>
</div>
<div id="the-run-app-button-above.-1" class="section level1">
<h1>the ‘Run App’ button above.</h1>
</div>
<div id="section-9" class="section level1">
<h1></h1>
</div>
<div id="find-out-more-about-building-applications-with-shiny-here-1" class="section level1">
<h1>Find out more about building applications with Shiny here:</h1>
</div>
<div id="section-10" class="section level1">
<h1></h1>
</div>
<div id="httpshiny.rstudio.com-1" class="section level1">
<h1><a href="http://shiny.rstudio.com/" class="uri">http://shiny.rstudio.com/</a></h1>
</div>
<div id="section-11" class="section level1">
<h1></h1>
<p>library(readxl) library(shiny) library(tidyverse) “”&quot;</p>
</div>
<div id="define-ui-for-application-that-draws-a-histogram" class="section level1">
<h1>Define UI for application that draws a histogram</h1>
<p>ui &lt;- fluidPage(</p>
<p># Application title titlePanel(‘Fun Stuff’),</p>
<p># Sidebar with a slider input for number of bins ## Buttons sidebarPanel(uiOutput(‘ticker1’), uiOutput(‘ticker2’)),</p>
<p># Show a plot of the generated distribution ## graphOutput mainPanel( plotOutput(‘ticker1’), plotOutput(‘ticker2’) ) )</p>
</div>
<div id="define-server-logic-required-to-draw-a-histogram" class="section level1">
<h1>Define server logic required to draw a histogram</h1>
<p>server &lt;- function(input, output) {</p>
<p>output<span class="math inline">\(lit_dat &lt;- renderUI({  selectInput(  ## The title of the imput (whatever)  inputId = &#39;ticker_1&#39;,  label = &#39;Select First Ticker&#39;,  ## first column  choices = unique(lit_dat\)</span>ticker_1) ) })</p>
<p>output<span class="math inline">\(lit_dat &lt;- renderUI({  selectInput(  inputId = &#39;ticker_2&#39;,  label = &#39;Select Second Ticker&#39;,  choices = unique(lit_dat\)</span>ticker_2) ) })</p>
<p>## This is where the graph is created ## Change renderTable to renderGraph output<span class="math inline">\(lit_dat &lt;- renderPlot({  cool &lt;- lit_dat %&gt;%  filter(ticker_1 == input\)</span>ticker1 &amp; ticker_2 == input$ticker2)</p>
<p>})</p>
<p>}</p>
</div>
<div id="run-the-application" class="section level1">
<h1>Run the application</h1>
<p>shinyApp(ui = ui, server = server)“”&quot;</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
